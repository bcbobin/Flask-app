<!DOCTYPE html>

<html>

<head>

<title>NTW Tools</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<link href="static/home.css" rel="stylesheet" type="text/css">    <!-- acesses the css file-->
<!-- Load an icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="static/jquery-ui/jquery.js"></script>
<script src="static/jquery-ui/jquery-ui.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
</head>

<body>

<div class="container-fluid">
  <div class="row">
    <div class="col">
        <img src="static/economical.jpg" alt="Economical Logo" style="width:11.25em;height:3em;">
    </div>
    <div class="col-6" style="text-align: center;">
        <p id="title" style="font-size:150%;font-family:verdana;font-weight:bold">Network Tools Portal</p>
    </div>
    <div class="col">
    </div>
  </div>
</div>
<!-- header buttons-->
<nav id="header" class="btn-group navbar navbar-expand-lg navbar-dark"> 
     <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent" style="background-color: #003359">
       <button id= "vlanbtn" class="navbtn nav-item" onclick="nav(1)"><i class="fa fa-fw fa-user"></i> VLAN Move</button><!--
    --><button  id= "wifibtn" class="navbtn nav-item pressed" onclick="nav(2)"><i class="fa fa-fw fa-wifi"></i> Guest Wi-Fi</button><!--
    --><button  id = "cwlanbtn" class="navbtn nav-item" onclick="nav(3)"><i class="fa fa-fw fa-signal"></i> C-WLAN</button>
    </div>
</nav>

<p/>  <!--this puts a space between the header and the welcome-->


<hr/>
<!-- this is the block that allows python message flashes to work  -->
<div id="alerts">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        {{message}}
        </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    
    {% block body %}{% endblock %}
</div>

<!-- guest wifi form--> 
<div id="WiFi" class="backgroundForms">
    <p style="margin-top: .5em;margin-bottom: 1em;font-size:35px;text-align:center;background-color:#60c2e9;color:white; padding:10px;">Guest Wi-Fi</p>
    <p style="text-align:center"><b>Would you like to add a New User or edit an existing user?</b></p>
        <div style="background-color:#003359;">
            
            <button id="addbtn" class="wifibtn" onclick="Navigate(1)">Add New User</button><!--
            --><div class="divider"></div><!--
            --><button id="searchbtn" class="wifibtn" onclick="Navigate(2)">Search for User</button>
        </div>
        <hr>
        <!--Add new user form-->
        <form id="guestWiFi" action="/new" method="post" enctype="multipart/form-data">
            <p style="font-size:35px;text-align:center;background-color:#60c2e9;color:white; padding:10px;"><b>Sponsor</b></p>    
            <label>RITM#:</label>
            <input type="text" name="ritm"required>
            <label>Sponsor Email:</label>
            <input type="email" name="sponsoremail" required>
                <label>Access Time Duration</label>
            <select name="length" class="selectDuration" required>
				<option  value = "14400">4 hours</option>
				<option  value = "28800">8 hours</option>
				<option  value ="86400">24 hours</option>
				<option  value ="259200">3 days</option>
				<option  value ="604800">7 days</option>
				<option id="approval" disabled="true" {{value}}><b>Requires Security Approval!</b></option>
				<option id="approval" value ="1209600" {{value}}>14 days</option>
				<option id="approval" value ="2592000" {{value}}>1 months</option>
				<option id="approval" value ="5184000" {{value}}>2 months</option>
				<option id="approval" value ="7776000" {{value}}>3 months</option>
				<option id="approval" value ="10368000" {{value}}>4 months</option>
				<option id="approval" value ="11826000" {{value}}>5 months</option>
				<option id="approval" value ="15552000" {{value}}>6 months</option>                
				<option id="approval" value ="31536000" {{value}}>1 year</option>
            </select>
<!--        <label>Username:</label>
            <input type="text" name="login" required>
            <label>Password:</label>
            <input type="password" name="password" required> -->
            <input value="Submit" type="submit" class="submitButton">
        </form>
    
        <!--Search for user form-->
        <form id="guestSearch" action="/searchdata" method="post" enctype="multipart/form-data">
            <p></p>
            <div class="row">
                <div class="col-11">
                    <label>Search for user by email address:</label>
                    <input name="search" type="email" placeholder="jondoe@hotmail.com.." ><!--
                 --><button type="submit" class="searchButton"><i class="fa fa-search"></i></button>
                </div>
            </div>
            <p id="userFound"></p>
        </form>
        
        
		<form id="test2" action="/edit">
			<table id="table1" style="border-spacing:0; width: 100%; text-align:center;" onclick="checker()">
				<tr>
					<td style="color:rgb(96, 194, 233); width:55%"><b>User </b></td>
					<td style="color:rgb(96, 194, 233); width: 40%"><b>Time Remaining </b></td>
					<td style="color:rgb(96, 194, 233);"><b>Select</b></td>
				</tr>
			</table>
			<p style="text-align:center;font-size:20px;">You have selected:</p>
			<p id="testing" style="text-align:center;font-size:20px;">Please select a user from the list above</p>
			<p style="text-align:center;font-size:20px;" id="one">Would you like to delete the user or extend their time?</p>
			<div class="row" id="two">
				<div class="col">
					<input type="button" style="width:100%;" value="Delete User" class="DelOrExt wifibtn" onclick="navigate(1)" id="delete">
				</div>
				<div class="col">
					<input type="button" style="width:100%;" value="Extend Time" class="DelOrExt wifibtn" onclick="navigate(2)" id="extend">
				</div>
			</div>
			<p id="three" style="margin-top: 16px; text-align:center;font-size:20px;"></p>
			<div class="row">
				<div class="col">
					<select name="extendSelect" id="four" class="selectDuration">
						<option selected value="0"> Please Select a Time </option>
						<option  value ="14400">4 hours</option>
						<option  value ="28800">8 hours</option>
						<option  value ="86400">24 hours</option>
						<option  value ="259200">3 days</option>
						<option  value ="604800">7 days</option>
						<option id="approval" disabled="true" {{value}}><b>Requires Security Approval!</b></option>
						<option id="approval" value ="1209600" {{value}}>14 days</option>
						<option id="approval" value ="2592000" {{value}}>1 months</option>
						<option id="approval" value ="5184000" {{value}}>2 months</option>
						<option id="approval" value ="7776000" {{value}}>3 months</option>
						<option id="approval" value ="10368000" {{value}}>4 months</option>
						<option id="approval" value ="11826000" {{value}}>5 months</option>
						<option id="approval" value ="15552000" {{value}}>6 months</option>                
						<option id="approval" value ="31536000" {{value}}>1 year</option>
					</select>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<input class="submitButton" type="button" value="Submit" id="five"> 
				</div>
			</div>
		</form>
</div>

<!-- vlan move form -->

<form id="vlanMove" class="backgroundForms" action="/index.php" method="post" enctype="multipart/form-data"> 
    <p style="margin-top: .5em;margin-bottom: 1em;font-size:35px;text-align:center;background-color:#60c2e9;color:white; padding:10px;">VLAN Move Request</p>
    <hr/>
        <label> Device Location:</label>
        <select name="devlocation" required>
            <option selected="true" disabled="true"><b>WESTMOUNT (10.1.X.X)</b></option>
            <option value="Westmount:Upper Floor">Westmount:Upper Floor</option>
            <option value="Westmount:Main Floor">Westmount:Main Floor</option>
            <option value="Westmount:Lower Floor">Westmount:Lower Floor</option>
            <option selected="true" disabled="true"><b>RIVERBEND (10.2.X.X)</b></option>
            <option value="Riverbend: 2nd Floor">Riverbend: Second Floor</option>
            <option value="Riverbend: 3rd Floor">Riverbend: Third Floor</option>
            <option value="Riverbend: 4th Floor">Riverbend: Fourth Floor</option>
            <option value="Riverbend: 5th Floor">Riverbend: Fifth Floor</option>
            <option selected="true" disabled="true"><b>Deskside Support Labs (10.2.254.X)</b></option>
            <option value="Riverbend: intellab">Riverbend: intellab</option>
            <option value="Riverbend: rbs2_level2lab">Riverbend: rbs2_level2lab</option>
        </select>   
        <label>VLAN Selection:</label>
        <select name="vlanselect" required>
            <option selected="true" disabled="true"><b>Special VLAN</b></option>
            <option value="Special VLAN 253">Special VLAN 253</option>
            <option selected="true" disabled="true"><b>Riverbend</b></option>
            <option value="402">Workstation VLAN (402) Second Floor</option>
            <option value="403">Workstation VLAN (403) Third Floor</option>
            <option value="404">Workstation VLAN (404) Fourth Floor</option>
            <option value="405">Workstation VLAN (405) Fifth Floor</option>
            <option value="406">Workstation New VLAN (406) Second Floor</option>
            <option selected="true" disabled="true"><b>Westmount</b></option>
            <option value="121">Upper Floor VLAN (121)</option>
            <option value="120">Upper Floor VLAN (120)</option>
            <option value="117">Main Floor VLAN (117)</option>
            <option value="119">Lower Floor VLAN (119)</option>
            <option selected="true" disabled="true"><b>Deskside Support Labs</b></option>
            <option value="40">E-WLAN VLAN (40)</option>
            <option value="45">C-WLAN VLAN (45)</option>
            <option value="70">IP_Phone VLAN (70)</option>
            <option value="71">IP_Phone VLAN (71)</option>
            <option value="72">IP_Phone VLAN (72)</option>
            <option value="73">IP_Phone VLAN (73)</option>
            <option value="74">IP_Phone VLAN (74)</option>
            <option value="81">Printers (81)</option>
            <option value="89">Dev_Voice_GW (89)</option>
        </select>   
        
        <div class="row">
            <div class="col">
                <label>MAC Address:</label>
                    <input type="text" id="macAddress" name="vlanmac" placeholder="XX:XX:XX:XX:XX:XX" maxlength='17' required>
            </div>
            <div class="col">
                <label>Device IP:</label>
                    <input type="text" name="IP" placeholder="Input Device IP.."required>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <label>Change Ticket #:</label>
                    <input type="text" name="chg" placeholder="Change #.." required>
            </div>
            <div class="col">
                <label>Work Station Number:</label>
                    <input type="text" name="workstation" placeholder="Workstation.." required>
            </div>
        </div>
        <input type="submit" value="Submit" class="submitButton" style="width:100%;">
</form>


<!-- c-wlan form -->

<div id="cwlan" class="backgroundForms"> 
    <p style="margin-top: .5em;margin-bottom: 1em;font-size:35px;text-align:center;background-color:#60c2e9;color:white; padding:10px;">C-WLAN</p>
    <p style="text-align:center"><b>Would you like to add a New User or edit an existing user?</b></p>
        <div style="background-color:#003359;">
            <button id="cwlanaddbtn" class="wifibtn" onclick="cwlan(1)">Add New User</button><!--
            --><div class="divider"></div><!--
            --><button id="cwlansearchbtn" class="wifibtn" onclick="cwlan(2)">Search for User</button>
        </div>
    <hr>
     <!--Add new user form-->
    <form id="addcwlan" action="/add" method="post" enctype="multipart/form-data">
        <p style="font-size:35px;text-align:center;background-color:#60c2e9;color:white; padding:10px;"><b>Add User</b></p>    
        <div class="row">
            <div class="col">
                <label>Wireless MAC address:</label>
                    <input type="text" id="cwlanmacAddress" name="cwlanmac" placeholder="XX:XX:XX:XX:XX:XX" maxlength='17' required>
            </div>
        </div>
        <div class="row">
            <label style="padding-left:15px">Sponsor Information:</label>
        </div>
        <div class="row">
            <div class="col">
                    <input type="text" name="spon_name" placeholder="Full Name" required>
            </div>
            <div class="col">
    
                    <input type="email" name="spon_email" placeholder="E-mail" required>
            </div>
            
        </div>
        <div class="row">
            <div class="col">
                <label>Start Date:</label>
                    <input type="date" name="startdate" required>
            </div>
            <div class="col">
                <label>End Date:</label>
                    <input type="date" name="enddate" required>
            </div>
        </div>
        <div class="row">
            <label style="padding-left:15px">User Information:</label>
        </div>
        <div class="row">
            <div class="col">
                    <input type="text" name="users_name" placeholder="Full Name" required>
            </div>
            <div class="col">
                    <input type="email" name="user_email" placeholder="E-mail" required>
            </div>
            <div class="col">
                    <input type="text" name="user_company" placeholder="Company" required>
            </div>
        </div>
        
    <input type="submit" value="Submit" class="submitButton" style="width:100%;">
    </form>
    
    <!--Implement new search functionality -->
    <form id="searchcwlan" action="/cwlan" method="post" enctype="multipart/form-data">
        <p style="font-size:35px;text-align:center;background-color:#60c2e9;color:white; padding:10px;"><b>Work In Progress...</b></p> 
    </form>
</div>

<!-- footer element  -->
<div id= "footer">
    <footer>
        <p id="tag">Powered by NTW</p><p align="right" id="contactfooter">Questions? E-mail <a id="contactemail" href="mailto:networkgroup@economical.com?Subject=Webpage%20Support" target="_top">networkgroup@economical.com</a></p>
    </footer>
</div>

<script type="text/javascript" src="static/home.js"></script>   <!-- accesses the javascript file-->
<!-- bootstrap link in case of use  -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
<script>
$(document).ready(function(){
	data = "{{output}}";
	if (data != ""){
		document.getElementById("guestWiFi").style.display="none";
        document.getElementById("guestSearch").style.display="block";
        document.getElementById("alerts").style.display="none";
        $('#searchbtn').toggleClass('wifipressed');
		document.getElementById("test2").style.display="block";
		searchData(data);
	}
	data="";
});

var people=[]
function searchData(data){
//data="config paging disable (ptor2nww01) >show netuser summary Maximum logins allowed for a given user name..... Unlimited User Name WLAN Id User Type Lifetime Description ------------------------ -------- --------- ------------------------------ -------------------------------- amy.a.butler@ca.ey.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec TASK0078709 angelina_tan@mckinsey.com WLAN 2 Guest 120 days 0 hrs 0 mins 0 sec REQ0072570 bobby.j.thompson@ca.ey.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec TASK0082431 carol.gibbs@economical.com WLAN 2 Guest 180 days 0 hrs 0 mins 0 sec RIT001422 carson.brett@ca.ey.com WLAN 2 Guest 120 days 0 hrs 0 mins 0 sec TASK0088056 dalton.roth@ca.ey.com WLAN 2 Guest 90 days 0 hrs 0 mins 0 secs TASK0088059 edwin.marquez@seb-admin.com WLAN 2 Guest 0 days 8 hrs 0 mins 0 secs RITM0073177 eigbmember@economical.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec RITM0072341 frank.morassut@adastragrp.com WLAN 2 Guest 180 days 0 hrs 0 mins 0 sec Task0084621 gorda@ca.ibm.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec REQ0073163 greg.demacio@ca.ey.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec TASK0082432 hans.reidl@economical.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec Cut-overto-CISCO jacque.friedland@gmail.com WLAN 2 Guest 180 days 0 hrs 0 mins 0 sec TASK0085371 jacque.friendland@gmail.com WLAN 2 Guest 180 days 0 hrs 0 mins 0 sec TASK0085371 jacqueline.tse@fsco.gov.on.ca WLAN 2 Guest 14 days 0 hrs 0 mins 0 secs TASK0089174 janice.c.deganis@ca.ey.com WLAN 2 Guest 90 days 0 hrs 0 mins 0 secs TASK0088054 kamal@ca.ibm.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec REQ0062123 karen.vacciana@fsco.gov.on.ca WLAN 2 Guest 14 days 0 hrs 0 mins 0 secs TASK0089183 kristen.nolan@ca.ey.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec TASK0078711 kristypryma@gmail.com WLAN 2 Guest 136 days 21 hrs 0 mins 0 sec RITM0066847 larry.penn@seb-admin.com WLAN 2 Guest 0 days 8 hrs 0 mins 0 secs N/A lbawtinh@ca.ibm.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec foronsiteworking-RITM0062132 lucy.shao@ca.ey.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec REQ0067032 madelaine.fielding@ca.ey.com WLAN 2 Guest 120 days 0 hrs 0 mins 0 sec TASK0088317 mariam.merchant@ca.ey.com WLAN 2 Guest 120 days 0 hrs 0 mins 0 sec TASK0088312 markin@ca.ibm.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec REQ0062123 marymcna@ca.ibm.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec REQ0062123 michael.tin@fsco.gov.on.ca WLAN 2 Guest 14 days 0 hrs 0 mins 0 secs TASK0089177 michelle.forster@seb-admin.com WLAN 2 Guest 1 days 0 hrs 0 mins 0 secs REQ0073177 miki.amakawa@fsco.gov.on.ca WLAN 2 Guest 14 days 0 hrs 0 mins 0 secs TASK0089171 nick.magyar@ca.ey.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec TASK0082433 peniel.efechaobor@ca.ey.com WLAN 2 Guest 120 days 0 hrs 0 mins 0 sec TASK0088060 philip.henville@hubio.ca WLAN 2 Guest 90 days 0 hrs 0 mins 0 secs REQ0070802 robpicc@ca.ibm.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec REQ0062123 ruby.leung@fsco.gov.on.ca WLAN 2 Guest 14 days 0 hrs 0 mins 0 secs REQ0072281 sarah.mukhtiyar@ca.ey.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec TASK0078712 sergepok@ca.ibm.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec REQ0062123 spanchal@ca.ibm.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec REQ0062123 tanya.k.kaushal@pwc.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec REQ0071973 tho.huynh@economical.com WLAN 2 Guest 120 days 0 hrs 0 mins 0 sec REQ0071973 wpgguest WLAN 2 Guest Infinity Winnipeg wsteele@ca.ibm.com WLAN 2 Guest 365 days 0 hrs 0 mins 0 sec TASK0084208 zach.ramsay@ca.ey.com WLAN 2 Guest 120 days 0 hrs 0 mins 0 sec TASK0088309 (ptor2nww01) >";
	data = data;
	if (data == ""){
		return
	}
	; //this array will store the names of all the people
	lines=data.split(" "); //this separates the data word by word

	for(i=0;i<lines.length;i++){   //this for loop will cycle through the lines array 
		var rowCount=1;  //this will be where the new row is added in the table, the first row will start at 1
		var table=document.getElementById("table1");   //this finds the table element in the html
		
		for(i=0;i<lines.length;i++){   //goes through the lines array
			if(lines[i].indexOf(".com")!=-1 || lines[i].indexOf(".ca")!=-1){   //this checks for .com and .ca since every email address in the system will end in one of the 2
				placeholder=lines[i].slice(lines[i].indexOf("\n"),lines[i].length);
				
				people.push(placeholder);  //pushes the name into the people array
				start=data.indexOf(placeholder);  //this is where to start searching					
				if (rowCount%2==1){//this will change the background colour in the table
					var coloring = "rgb(96, 194, 233)";  
					var fontColor="white";
					var bording="none";
				} else {
					var coloring = "white";
					var fontColor="rgb(96, 194, 233)";
					var bording="1px solid rgb(96, 194, 233)";
				}
				var date=data.slice(data.indexOf("Guest",start)+6, data.indexOf("sec",start)+3); //slices the date out
				var row=table.insertRow(rowCount);  //inserts a row at the position of rowCount
				var cell1=row.insertCell(0);   //left hand column 
				var cell2=row.insertCell(1);   //middle column
				var cell3=row.insertCell(2);   //right hand column
				
				var column1=document.createElement("p");  //creates a p element
				column1.style.backgroundColor=coloring;   //sets the background colour of the p element
				column1.style.color=fontColor;            //sets the font color of the p element
				column1.style.border=bording;             //sets the border of the p element
				var names=document.createTextNode(placeholder);  //creates a text node with the value of the persons name
				column1.appendChild(names);    //appends the text node into the p element
				cell1.appendChild(column1);    //appends the p element to the left hand cell in the table
				
				var column2=document.createElement("p");  //creates a p element
				column2.style.backgroundColor=coloring;   //sets the background color of the p element
				column2.style.color=fontColor;            //sets the font color of the p element
				column2.style.border=bording;             //sets the border of the p element
				var date=document.createTextNode(date);   //creates a text node with a value of the date
				column2.appendChild(date);                //appends the date to the p elememt 
				cell2.appendChild(column2);               //appends the p element to the middle cell of the table
				
				var column3=document.createElement("p");  //creates a p element
				column3.style.backgroundColor=coloring;    //sets the background colour of the p element
				column3.style.color=fontColor;             //sets the font color of the p element
				column3.style.border=bording;              //sets the border of the p element
				var selects=document.createElement("input");  //creates an input element
				selects.type="radio";           //sets the type of the input to radio
				selects.name="radioButtons"    //the radio buttons all need to have the same name in a table or else they act like check boxes and users would be able to select multiple people at one time
				selects.id=placeholder;           //sets the id of the radio button to the persons name --> this will be used in the function "checker"
				selects.className="radioButtons"
				selects.value=placeholder;
				column3.appendChild(selects);   //appends the radio button to the p element
				cell3.appendChild(column3);     //appends the p element to the right hand cell of the table
				
				rowCount++;  //increases the row count by one so the next name will be added into the next row
			}
		}
	}
}

function checker(){ //this function finds which radio button was selected
	for (i=0;i<people.length;i++){  //loops through all of the people on the list to see if they are checked
		x=document.getElementById(people[i]);   // this finds the checkbox
		if (x.checked==true){  //checks if the checkbox is checked
			document.getElementById("testing").innerHTML=people[i];
			//the following three lines are used to reset the page if the user decides to select another person from the list
			document.getElementById("three").style.display="none";
			document.getElementById("four").style.display="none";
			document.getElementById("five").style.display="none";
			//document.getElementById("two").style.marginBottom="200px";
		} 
	}
}
</script>

</body>


</html>